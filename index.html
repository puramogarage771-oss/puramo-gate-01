<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>PURAMO AUDIO TEST</title>
<style>
body {
  margin: 0;
  background: #000;
  color: #ccc;
  font-family: Consolas, monospace;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
#btn {
  cursor: pointer;
  font-size: 20px;
  letter-spacing: 4px;
}
</style>
</head>

<body>
<div id="btn">▶ CLICK ◀</div>

<script>
let ctx;

document.getElementById("btn").onclick = () => {
  if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();

  const now = ctx.currentTime;

  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  const filter = ctx.createBiquadFilter();

  osc.type = "sawtooth";          // 声帯
  osc.frequency.setValueAtTime(180, now);
  osc.frequency.linearRampToValueAtTime(140, now + 0.8);

  filter.type = "lowpass";        // ブー音回避
  filter.frequency.setValueAtTime(1800, now);

  gain.gain.setValueAtTime(0, now);
  gain.gain.linearRampToValueAtTime(0.25, now + 0.05); // ← 重要
  gain.gain.linearRampToValueAtTime(0, now + 1.2);

  osc.connect(filter);
  filter.connect(gain);
  gain.connect(ctx.destination);

  osc.start(now);
  osc.stop(now + 1.3);
};
</script>
</body>
</html>
